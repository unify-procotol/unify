---
title: Finance Plugin
description: The Finance Plugin provides access to financial market data through Alpha Vantage API, enabling real-time and historical stock, forex, and cryptocurrency data retrieval in your URPC applications.
---

## Installation

```package-install
@unilab/finance
```

## Basic Setup

### Server Configuration

```typescript
import { URPC } from "@unilab/urpc-hono";
import { FinancePlugin } from "@unilab/finance";

const app = URPC.init({
  plugins: [
    FinancePlugin({
      alphaVantageApiKey: process.env.ALPHA_VANTAGE_API_KEY,
    }),
  ],
});

export default {
  port: 3000,
  fetch: app.fetch,
};
```

### Client Usage

```typescript
import { CurrencyEntity } from "@unilab/finance/entities";
import { repo, URPC } from "@unilab/urpc";

URPC.init({
  baseUrl: "http://localhost:3000",
});

// Get daily time series data for a stock
const getStockData = async () => {
  const result = await repo<CurrencyEntity>({
    entity: "CurrencyEntity",
    source: "alpha-vantage",
  }).findOne({
    where: {
      function: "TIME_SERIES_DAILY",
      symbol: "AAPL",
    },
  });

  console.log(result);
  // Returns: { function: "TIME_SERIES_DAILY", symbol: "AAPL", "Time Series (Daily)": {...} }
};
```

Get your free API key from [Alpha Vantage](https://www.alphavantage.co/support/#api-key).

## Supported Functions

The plugin supports various Alpha Vantage functions. Here are some commonly used ones:

- `TIME_SERIES_DAILY` - Daily time series data
- `TIME_SERIES_WEEKLY` - Weekly time series data
- `TIME_SERIES_MONTHLY` - Monthly time series data
- `TIME_SERIES_INTRADAY` - Intraday time series data
- `CURRENCY_EXCHANGE_RATE` - Real-time exchange rates
- `FX_DAILY` - Daily forex data

## Examples

### Get Weekly Stock Data

```typescript
const getWeeklyData = async () => {
  const result = await repo<CurrencyEntity>({
    entity: "CurrencyEntity",
    source: "alpha-vantage",
  }).findOne({
    where: {
      function: "TIME_SERIES_WEEKLY",
      symbol: "MSFT",
    },
  });

  console.log("Weekly data for MSFT:", result);
};
```

### Get Forex Exchange Rate

```typescript
const getForexData = async () => {
  const result = await repo<CurrencyEntity>({
    entity: "CurrencyEntity",
    source: "alpha-vantage",
  }).findOne({
    where: {
      function: "FX_DAILY",
      symbol: "EURUSD",
    },
  });

  console.log("EUR/USD exchange rate:", result);
};
```

### Get Cryptocurrency Data

```typescript
const getCryptoData = async () => {
  const result = await repo<CurrencyEntity>({
    entity: "CurrencyEntity",
    source: "alpha-vantage",
  }).findOne({
    where: {
      function: "DIGITAL_CURRENCY_DAILY",
      symbol: "BTC",
    },
  });

  console.log("Bitcoin daily data:", result);
};
```
